<!DOCTYPE html>

<html lang="en-us">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>OHLC MACD chart | avergnaud.github.io</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://avergnaud.github.io/css/main.min.dc28ee22c67edaf047ca6b6b279a9acf75abc61acdbfc57f11dc480a0da610dc.css"/>

    
    
    

    
    
 
    </head>

    <body>
        
<nav>
  <div class="nav-container">
      <header>
    <div class="site-title">
        <a href="/">avergnaud.github.io</a>
    </div>  
</header>

      
      <div class="description-container">
        <div class="description">
            <p><a href="https://en.wikipedia.org/wiki/Financial_technology">Fintech</a> and full stack development</p>
        </div>
      </div>
      
      <div class="nav-menu">
        
          <a class="color-link nav-link" href="/">Home</a>
        
          <a class="color-link nav-link" href="/about/">About</a>
        
          <a class="color-link nav-link" href="/hosted-paged/">Hosted pages</a>
        
          <a class="color-link nav-link" href="/tags/">Tags</a>
        
        
      </div>
    </div>
<footer class="footer">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    
    
    

    

    

    

    

    

</div>




	<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
	<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src = "https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.0/d3.js"></script>
	<script src="https://avergnaud.github.io/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin="anonymous"></script>
</footer>
</nav>

        <div id="content" class="content-container">
        

<h1 class="post-title">OHLC MACD chart</h1>
    
    <time>May 3, 2020</time>
    
    <div>
        <p>
        <p>OHLC chart and MACD indicator for ETHEUR 1day Kraken market data.</p>
<p>See the <a href="https://macd-front.web.app/">demo</a> hosted on Firebase.</p>
<p>The graph enables horizontal scrolling. Click the graph to display each period&rsquo;s closing price.</p>
<hr class="ohlc-macd-chart-sep">
<div id="ohlc-macd-chart-price"></div>
<div id="ohlc-macd-chart-area"></div>
<hr class="ohlc-macd-chart-sep">
<p>Sources are available on github for the <a href="https://github.com/avergnaud/macd-definition">backend server</a> and the <a href="https://github.com/avergnaud/macd-front">ReactJS frontend</a>. The Java server is hosted on Heroku and uses a PostgreSQL database. The server requests the Kraken API every two minutes to retrieve the latest OHLC data. It also computes the MACD every two minutes. The ReactJS frontend is hosted on Firebase.</p>
<p>From <a href="https://en.wikipedia.org/wiki/MACD">wikipedia</a>: the MACD, short for moving average convergence/divergence, is a trading indicator used in technical analysis of stock prices.</p>
<script src = "/script/ohlc-macd-span.js"></script> 
<script>
    const chart = new MacdChart({
      element: document.querySelector('#ohlc-macd-chart-area'),
      config: {
        innerWidth: 435,
        innerOhlcHeight: 167,
        innerMacdHeight: 100,
        margin: {
          top: 50,
          right: 50,
          bottom: 50,
          left: 0,
          xaxis: 50,
          yaxis: 50
        },
        timeFormat: "%Y-%m-%d"
      }
    });
    Promise.all([
      d3.json("https://macd-definition.herokuapp.com/ohlc/?chartEntityId=2&last=100"),
      d3.json("https://macd-definition.herokuapp.com/macd/?macdDefinitionId=1&last=100"),
      /*
      d3.json("http://localhost:8080/ohlc/?chartEntityId=9395"),
      d3.json("http://localhost:8080/macd/?macdDefinitionId=9394"),
      */
    ]).then(function (data) {
      const macdByTimestamp = new Map();
      data[1].forEach(item => {
        macdByTimestamp.set(item.timeEpochTimestamp, {
          macdValue: item.macdValue,
          signalValue: item.signalValue
        });
      });
      let ohlcData = data[0];
      let formattedData = ohlcData.map(item => {
        let macdObj = macdByTimestamp.get(item.timeEpochTimestamp);
        return {
            timeStamp: item.timeEpochTimestamp * 1000,
            time: new Date(item.timeEpochTimestamp * 1000),
            open: item.openingPrice,
            high: item.highPrice,
            low: item.lowPrice,
            close: item.closingPrice,
            macd: macdObj ? macdObj.macdValue : undefined,
            signal: macdObj ? macdObj.signalValue : undefined
        }});
      chart.draw(formattedData);
    });
  </script><blockquote>
</blockquote>
        </p>
    </div>
    

    

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="/tags/fintech">#fintech</a>
        
            <a class="tag" href="/tags/spring">#Spring</a>
        
            <a class="tag" href="/tags/d3.js">#D3.js</a>
        
            <a class="tag" href="/tags/react">#React</a>
        
      
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css" crossorigin="anonymous">
<script type="text/javascript" src="/js/katex.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);" crossorigin="anonymous"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    
    
    

    

    

    

    

    

</div>




	<div class="footer-mobile-links">
		<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
		<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="https://avergnaud.github.io/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin="anonymous"></script>
</footer>
    </body>
</html>